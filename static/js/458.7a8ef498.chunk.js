"use strict";(self.webpackChunksmart_finance=self.webpackChunksmart_finance||[]).push([[458],{9420:function(n,e,t){t.d(e,{Z:function(){return b}});var a=t(4165),r=t(5861),s=t(9439),c=t(2791),o=t(8687),i=t(6599),u=t.n(i),l=(t(9293),t(5688)),m=t(7320),f=t(6129),p="_balance_formBalance__1+4gv",d="_balance_input__DgSyp",_="_balance_btn__7RO-D",x="_balance_label__8VxD-",h="_balance_inputBox__xsFEr",v=t(184);var b=(0,o.$j)((function(n){return{userId:(0,m.n5)(n),currentBalance:(0,m.sb)(n)}}),(function(n){return{sendData:function(e){return n((0,f.F)(e))}}}))((function(n){var e=n.userId,t=n.sendData,o=n.currentBalance,i=(0,c.useState)(o),m=(0,s.Z)(i,2),f=m[0],b=m[1],j=function(){var n=(0,r.Z)((0,a.Z)().mark((function n(r){var s;return(0,a.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r.preventDefault(),s={id:e,balance:f},n.next=4,t(s);case 4:u()(l.ST).showToast();case 5:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}();return(0,c.useEffect)((function(){b(o)}),[o]),(0,v.jsxs)("form",{className:p,onSubmit:j,children:[(0,v.jsx)("label",{className:x,children:"Balance:"}),(0,v.jsxs)("div",{className:h,children:[(0,v.jsx)("input",{className:d,name:"balance",value:f,placeholder:"Balance",onChange:function(n){b(n.target.value)}}),(0,v.jsx)("button",{className:_,children:"CONFIRM"})]})]})}))},6458:function(n,e,t){t.r(e),t.d(e,{default:function(){return Y}});var a=t(7689),r=t(1087),s=t(2791),c=t(8687),o=t(4165),i=t(5861),u=t(1243),l=t(6916);u.Z.defaults.baseURL="https://sfbackend-1-q4339617.deta.app/";var m=t(9869),f=t(7320),p=function(n){return n.transactions.expenses},d=function(n){return n.transactions.incomes},_=function(n){return n.transactions.summaryExpenses},x=function(n){return n.transactions.summaryIncomes},h=t(1413),v=t(9439),b=t(9338),j=t(6571),N=t(4096),y=["Products","Transport","Health","Alcohol","Home","Entertainment","Technics","Public Utilities, connection","Sports, hobbies","Education","Other"],Z=["Salary","Additional income"],g=t(6535),k={input:"_form_input__2T4TK",date:"_form_date__b940B",description:"_form_description__TTm0c",dropdownMenu:"_form_dropdownMenu__-zKRB",amount:"_form_amount__ikWEa",select:"_form_select__IWMBt",option:"_form_option__rTE9V",btn:"_form_btn__lylht",form:"_form_form__nv3oO",inputsBox:"_form_inputsBox__ST7TG",dateInput:"_form_dateInput__uAn+x",menuTitle:"_form_menuTitle__kFfVr",btnContainer:"_form_btnContainer__JmUbN"},T=t(184);var C=(0,c.$j)(null,(function(n){return{sendDataExpense:function(e){return n(function(n){return function(e){e((0,l.Gu)());var t={description:n.description,category:n.category[0],amount:Number(n.amount),date:n.date};return u.Z.post("api/transactions/expense",t).then((function(n){var t=n.data;return e((0,l.N4)(t))})).catch((function(n){return e((0,l.BS)(n))}))}}(e))},sendDataIncome:function(e){return n(function(n){return function(e){e((0,l.xL)());var t={description:n.description,category:n.category[0],amount:Number(n.amount),date:n.date};return u.Z.post("api/transactions/income",t).then((function(n){var t=n.data;return e((0,l.qs)(t))})).catch((function(n){return e((0,l.uD)(n))}))}}(e))}}}))((function(n){var e=n.sendDataExpense,t=n.sendDataIncome,r=(0,s.useState)(""),c=(0,v.Z)(r,2),u=c[0],l=c[1],m=(0,s.useState)(["Choose category"]),f=(0,v.Z)(m,2),p=f[0],d=f[1],_=(0,s.useState)(""),x=(0,v.Z)(_,2),C=x[0],w=x[1],E=(0,s.useState)(null),S=(0,v.Z)(E,2),D=S[0],A=S[1],I=(0,a.TH)(),B=function(n){var e=n.target,t=e.name,a=e.value;switch(t){case"description":l(a);break;case"category":d([a]);break;case"amount":w(a);break;default:return}},R=function(){var n=(0,i.Z)((0,o.Z)().mark((function n(a){var r;return(0,o.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a.preventDefault(),n.next=3,{category:p,description:u,amount:C,date:D};case 3:if(r=n.sent,"/transactions/expenses"!==I.pathname){n.next=9;break}return n.next=7,e(r);case 7:n.next=11;break;case 9:return n.next=11,t(r);case 11:V();case 12:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),V=function(){l(""),d(["Choose category"]),w(""),A(null)};return(0,T.jsxs)("form",{onSubmit:R,className:k.form,children:[(0,T.jsxs)("div",{className:k.inputsBox,children:[(0,T.jsx)(j._,{dateAdapter:b.H,children:(0,T.jsx)(g.Z,{className:k.box1,children:(0,T.jsx)(N.M,{label:"Custom input",value:D,onChange:function(n){A(n)},className:k.datePicker,renderInput:function(n){var e=n.inputRef,t=n.inputProps,a=n.InputProps;return(0,T.jsxs)(g.Z,{className:k.date,sx:{display:"flex",alignItems:"center"},children:[(0,T.jsx)("input",(0,h.Z)((0,h.Z)({ref:e},t),{},{className:k.dateInput,required:!0})),null===a||void 0===a?void 0:a.endAdornment]})}})})}),(0,T.jsx)("input",{type:"text",className:k.description,label:"Description",placeholder:"Description",value:u,onChange:B,name:"description",autoComplete:"none",maxLength:30}),(0,T.jsxs)("div",{className:k.dropdownMenu,children:[(0,T.jsx)("h3",{className:k.menuTitle,children:p}),"/transactions/expenses"===I.pathname?(0,T.jsx)("select",{multiple:!0,value:p,label:"Category",name:"category",onChange:B,className:k.select,children:y.map((function(n){return(0,T.jsx)("option",{value:n,className:k.option,children:n},n)}))}):(0,T.jsx)("select",{multiple:!0,value:p,label:"Category",name:"category",onChange:B,className:k.select,children:Z.map((function(n){return(0,T.jsx)("option",{value:n,className:k.option,children:n},n)}))})]}),(0,T.jsx)("input",{required:!0,name:"amount",type:"number",placeholder:"0.00",label:"Amount",value:C,onChange:B,className:k.amount})]}),(0,T.jsxs)("div",{className:k.btnContainer,children:[(0,T.jsx)("button",{type:"submit",className:k.btn,children:(0,T.jsx)("span",{children:"ENTER"})}),(0,T.jsx)("button",{type:"button",onClick:function(){return V()},className:k.btn,children:(0,T.jsx)("span",{children:"CLEAR"})})]})]})})),w=t(9297),E={summaryContainer:"_summary_summaryContainer__RofMV",btnNext:"_summary_btnNext__vfATz",item:"_summary_item__dbc8X",transactionTypeBox:"_summary_transactionTypeBox__dRD7b",textYear:"_summary_textYear__Y-amg",spanAmount:"_summary_spanAmount__MlT3T"},S=0;var D=(0,c.$j)((function(n){return{summaryExpenses:_(n),summaryIncomes:x(n)}}))((function(n){var e=n.data,t=(0,s.useState)(e.map((function(n){return n[0]}))),r=(0,v.Z)(t,2),c=r[0],u=r[1],l=(0,s.useState)(c[0]),m=(0,v.Z)(l,2),f=m[0],p=m[1],d=(0,s.useState)(e[0][1]),_=(0,v.Z)(d,2),x=_[0],h=_[1],b=(0,a.TH)();(0,s.useEffect)((function(){S=0,u(e.map((function(n){return n[0]}))),p(e[0][0]),h(e[0][1])}),[e]),(0,s.useEffect)((function(){h(e.find((function(n){return n[0]===f}))[1])}),[f]);var j=function(){var n=(0,i.Z)((0,o.Z)().mark((function n(){return(0,o.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,S;case 2:if(n.t0=n.sent,0!==n.t0){n.next=7;break}n.t1=c.length-1,n.next=8;break;case 7:n.t1=S-1;case 8:if(S=n.t1,void 0!==c[S]){n.next=13;break}return n.abrupt("return",p(c[0]));case 13:return n.next=15,p(c[S]);case 15:return n.abrupt("return");case 16:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}(),N=function(){var n=(0,i.Z)((0,o.Z)().mark((function n(){return(0,o.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,S;case 2:if(n.t0=n.sent,n.t1=c.length-1,n.t0!==n.t1){n.next=8;break}n.t2=0,n.next=9;break;case 8:n.t2=S+1;case 9:if(S=n.t2,void 0!==c[S]){n.next=14;break}return n.abrupt("return",p(c[0]));case 14:return n.next=16,p(c[S]);case 16:return n.abrupt("return");case 17:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();return(0,T.jsxs)("div",{className:E.summaryContainer,children:[(0,T.jsxs)("div",{className:E.transactionTypeBox,children:[(0,T.jsx)("button",{className:E.btnNext,onClick:N,children:(0,T.jsx)(w.Z,{name:"Vector left"})}),(0,T.jsx)("p",{className:E.textYear,children:f}),(0,T.jsx)("button",{className:E.btnNext,onClick:j,children:(0,T.jsx)(w.Z,{name:"Vector right"})})]}),(0,T.jsx)("ul",{className:E.list,children:x.map((function(n){return(0,T.jsxs)("li",{className:E.item,children:[(0,T.jsx)("span",{className:E.spanMonth,children:n[0]}),"/transactions/expenses"===b.pathname?(0,T.jsxs)("span",{className:E.spanAmount,children:["- ",n[1]]}):(0,T.jsxs)("span",{className:E.spanAmount,children:["+ ",n[1]]})]},n[0])}))})]})})),A="_transactionsView_transactionsSection__A2dL6",I="_transactionsView_navigation__rq6cj",B="_transactionsView_navLink__OX1TY",R="_transactionsView_transactionsContainer__qFMm4",V=(0,s.lazy)((function(){return t.e(435).then(t.bind(t,6435))}));var L=(0,c.$j)((function(n){return{expenses:p(n),incomes:d(n),summaryExpenses:_(n),summaryIncomes:x(n)}}),(function(n){return{onDeleteExpense:function(e){return n((t=e,function(n){n((0,l.V9)()),u.Z.delete("api/transactions/".concat(t)).then((function(e){var t=e.data;return n((0,l.J_)(t))})).catch((function(e){return n((0,l.sb)(e))}))}));var t},onDeleteIncome:function(e){return n((t=e,function(n){n((0,l.xQ)()),u.Z.delete("api/transactions/".concat(t)).then((function(e){var t=e.data;return n((0,l.Mb)(t))})).catch((function(e){return n((0,l.vm)(e))}))}));var t}}}))((function(n){var e=n.expenses,t=n.incomes,s=n.onDeleteExpense,c=n.onDeleteIncome,o=n.summaryExpenses,i=n.summaryIncomes;return(0,T.jsxs)(T.Fragment,{children:[(0,T.jsxs)("nav",{className:I,children:[(0,T.jsx)(r.OL,{to:"/transactions/expenses",className:B,style:function(n){var e=n.isActive;return{boxShadow:e?null:"none",color:e?"#886aff":"#79819c"}},children:"EXPENSES"}),(0,T.jsx)(r.OL,{to:"/transactions/incomes",className:B,style:function(n){var e=n.isActive;return{boxShadow:e?null:"none",color:e?"#886aff":"#79819c"}},children:"INCOMES"})]}),(0,T.jsxs)("section",{className:A,children:[(0,T.jsx)(C,{}),(0,T.jsxs)("div",{className:R,children:[(0,T.jsx)(a.j3,{}),(0,T.jsxs)(a.Z5,{children:[(0,T.jsx)(a.AW,{path:"/expenses",exact:!0,element:(0,T.jsxs)(T.Fragment,{children:[(0,T.jsx)(V,{data:e,onDelete:s}),o.length>0?(0,T.jsx)(D,{data:o}):null]})}),(0,T.jsx)(a.AW,{path:"/incomes",exact:!0,element:(0,T.jsxs)(T.Fragment,{children:[(0,T.jsx)(V,{data:t,onDelete:c}),i.length>0?(0,T.jsx)(D,{data:i}):null]})})]})]})]})]})})),M=t(9420),P=t(1553),O="_transactionsPage_linkToReports__GVXCx",F="_transactionsPage_transactions__section__bp1Em",q="_transactionsPage_transactionsView__container__bm1R4",H="_transactionsPage_balance__container__5l52v";t(8022);var Y=(0,c.$j)((function(n){return{loading:(0,f.vc)(n),isAuthenticated:(0,m.j3)(n)}}),(function(n){return{fetchTransactionsList:function(){return n(function(){var n=(0,i.Z)((0,o.Z)().mark((function n(e){return(0,o.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e((0,l.hv)()),n.next=3,u.Z.get("api/transactions/").then((function(n){var t=n.data;return e((0,l.Oh)(t))})).catch((function(n){return e((0,l.kP)(n))}));case 3:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}())},fetchSummaryList:function(){return n(function(){var n=(0,i.Z)((0,o.Z)().mark((function n(e){return(0,o.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e((0,l.Z_)()),n.next=3,u.Z.get("api/transactions/summary").then((function(n){var t=n.data;return e((0,l.db)(t))})).catch((function(n){return e((0,l.AO)(n))}));case 3:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}())}}}))((function(n){var e=n.isAuthenticated,t=n.fetchSummaryList,c=n.fetchTransactionsList,o=n.loading,i=(0,a.TH)(),u=(0,s.useRef)(!0),l=(0,a.s0)();return(0,s.useEffect)((function(){if(!e)return l("/login",{replace:!0});u.current&&(c(),t(),u.current=!1)}),[e]),(0,s.useEffect)((function(){localStorage.setItem("lastTab",i.pathname)}),[i]),(0,T.jsxs)("section",{className:F,children:[(0,T.jsxs)("div",{className:H,children:[(0,T.jsx)(M.Z,{}),(0,T.jsxs)(r.rU,{to:"/reports",className:O,children:["Reports",(0,T.jsx)(w.Z,{name:"reports icon"})]})]}),(0,T.jsx)("div",{className:q,children:o?(0,T.jsx)(P.Z,{}):(0,T.jsx)(L,{})})]})}))}}]);
//# sourceMappingURL=458.7a8ef498.chunk.js.map